!function(a,b){"function"==typeof define&&define.amd?define("waterfall",function(){return b}):"object"==typeof module&&module.exports?module.exports=b:a.waterfall=b}(this,function a(b){function c(a,b){var c=window.getComputedStyle(b);return parseFloat(c["margin"+a])||0}function d(a){return a+"px"}function e(a){return parseFloat(a.style.top)}function f(a){return parseFloat(a.style.left)}function g(a){return a.clientWidth}function h(a){return a.clientHeight}function i(a){return e(a)+h(a)+c("Bottom",a)}function j(a){return f(a)+g(a)+c("Right",a)}function k(a){a=a.sort(function(a,b){return i(a)===i(b)?f(b)-f(a):i(b)-i(a)})}function l(c){g(b)!=u&&(c.target.removeEventListener(c.type,arguments.callee),a(b))}"string"==typeof b&&(b=document.querySelector(b));var m=[].map.call(b.children,function(a){return a.style.position="absolute",a});b.style.position="relative";var n=[];m.length&&(m[0].style.top="0px",m[0].style.left=d(c("Left",m[0])),n.push(m[0]));for(var o=1;o<m.length;o++){var p=m[o-1],q=m[o],r=j(p)+g(q)<=g(b);if(!r)break;q.style.top=p.style.top,q.style.left=d(j(p)+c("Left",q)),n.push(q)}for(;o<m.length;o++){k(n);var q=m[o],s=n.pop();q.style.top=d(i(s)+c("Top",q)),q.style.left=d(f(s)),n.push(q)}k(n);var t=n[0];b.style.height=d(i(t)+c("Bottom",t));var u=g(b);window.addEventListener?window.addEventListener("resize",l):document.body.onresize=l});